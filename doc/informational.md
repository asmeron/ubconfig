# UBCONFIG
# Информационный компонент

## 1. Назначение

Вспомогательный компонент общего назначения. Определяет вид хранение данных
о обьектах UBCONFIG(модули, вкладки, скрипты, визуальные элементы, шаблоны ядра) а также предоставляет централизованный интерфейс доступа к ним других компонентов.

## 2. Задачи

* Организовать структурированое хранение данных о обьектах UBCONFIG(модули, вкладки, скрипты, визуальные элементы, шаблоны)
* Опредилить формат и структуру основных файловых единиц обьектов
* Разработать набор функций для предостовление данных другим компонентам
* Состовление пользовательской документаций вида хранения и форматов файловых единиц

## 3. Структура хранения

### 3.1 Модули

Обьект модуля --- это католог с двумя файловами единицами в корне. Каждый такой католог предстовляет собой отдельный модуль.
Такие катологи хранятся по пути `UBCONFIG/custom/modules`. Имя католога является системным именем модуля. В нем содержатся
следущие файлы:

* base.info --- Служебные данные о модуле.
 * Имя отбражаемое в интерфейсе
 * Статус активности
 * Краткое описание

* help --- Спарвочная информация по использованию

base.info --- простой текстовый файл с построчной структурой в виде `Ключ = Значение`.
Список директив и их значений необходимо указать в пользовательской документаций.

Файл help подрозумевает содержание обьемного текста с подержкой основных HTML--тегов форматирования.
Список поддерживаемых тегов необходимо указать в пользовательской документаций.

### 3.2 Вкладки

Вкладки представляю собой католог `tabs` внутри католога модуля с набором файлов. Один файл равен одному шаблону вкладки.
Они могут быть двух видов `tpl` и `dpl`. Первый вид принимает данные только от Sh скриптов и может быть вызвана в интерфейсе пользователем только в одном экземпляре, в то время как второй способен принимать данные от сервера, не вызывается пользователем напремую и способен генерировать множество экземпляров.Первые две строки имеют построчную структуру в виде `Ключ = Значение`. В которой будут описаны имя вкладки и ее краткое описание. После пустой строки файл содержит код разметки шаблона.

### 3.3 Скрипты

Скрипты - это Sh файлы располагающие в каталоге `scanatio` внутри католога модуля, содержашие в себе порядок действий которые необходимо выполнить в системе.

### 3.4 Визуальные элеметы

Данные обьекты распалагаются по пути `UBCONFIG/custom/element` и состоят из каталога, двух обезательных файлов и двух опциональных. Имя каталога интерпритируется как имя элемента. Он должен содержать в себе файл man содержайщий в себе руководство по использованию элемента. Второй обезательный файл является одноименым с катологом файлом формата `HTML` с кодом шаблона элемента. Так же католог может содержать `CSS` и `JS` файлы если необходимо.

### 3.5 Шаблоны ядра

По пути `UBCONFIG/kernel/tpl` содержится набор `tpl` файлов, котрые хранят информацию о шаблоне отображение элементов итерфейса.

## 4. Функционнальные единицы

### 4.1 Получение служебной информаций о модуле

* Вход: Системное имя модуля, Набор ключей значение которых необходимо получить(опциональнно)
* Выход: Ассоциативный массив где ключ массива --- ключ модуля, а значение по ключу --- значение ключа модуля

Читает base.info модуля и получает значение ключей указаные в наборе или все значение, в случае пустого набора.

### 4.2 Получение справочной информаций модуля

* Вход: Системное имя модуля
* Выход: Текст справки

Читает файл help, проверяет на корректность и возврашает содержимое.

### 4.3 Информация о наличие модулей

* Вход: не требуется
* Выход: Массив содержащий все найденые модули в виде системных имен

Сканирует `UBCONFIG/custom/modules` и возвращает результат.

### 4.4 Получение вкладок модуля

* Вход: Системное имя модуля, режим сканирование (опционнально)
* Выход: Ассоциативный массив где ключ --- системное имя вкладки, а значение по ключу --- имя  вкладки

Сканирует `UBCONFIG/custom/modules/$1/tabs`, считывает каждый наиденый `tpl` файл возвращает имена, в случае если режим сканирование указан как TRUE будет считыватся так же и `dpl` файлы.

### 4.5 Получение служебной информаций о вкладке

* Вход: Системное имя модуля, Системное имя вкладки, Набор ключей значение которых необходимо получить(опциональнно)
* Выход: Ассоциативный массив где ключ массива --- ключ вкладки, а значение по ключу --- значение дключа вкладки

Читает файл вкладки и получает значение ключей указаные в наборе или все значение, в случае пустого набора.

### 4.6 Получение шаблона вкладки

* Вход: Системное имя модуля, Системное имя вкладки
* Выход: Текст шаблона

Читает файл вкладки и получает код шаблона.

### 4.7 Проверка статуса модуля

* Вход: Системное имя модуля
* Выход: False or True

Получает значение ключа Active из base.info и проверяет его.

### 4.8 Информация о наличие визуальных элементов

* Вход: не требуется
* Выход: Массив содержащий все найденые элементы в виде системных имен

Сканирует `UBCONFIG/custom/element` и возвращает результат.

### 4.9 Получения руководства элемента

* Вход: Системное имя элемента
* Выход: Текст руководства

Читает файл man, проверяет на корректность и возврашает содержимое.

### 4.10 Получение реализаций элемента

* Вход: Системное имя модуля
* Выход: Код шаблона или Массив в случае наличия необезательных файлов

Читает HTML, CSS, JS файлы и возращает их содержимое.

### 4.11 Получение кодов шаблонов ядра

* Вход: Системное имя шаблона
* Выход: Код шаблона

Читает файлы шаблона и возращает его содержимое.

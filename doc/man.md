# UBPARSE
## Общие действия

1. Считывание данных из файла "Шаблон парсинга" (каталог parse)
2. Находим файл конфигураций
3. Читаем построчно файл
4. Опредиляем тип строки
5. Определяем есть ли конец файла, если да то завершаем, иначе читаем файл дальше

## Если задан ключ -r 
1. Сравниваем уровень вложения строки с заданым
2. При соответствии, фильтр сообщает об успешности

## Если задан ключ -n 
1. Проверяем флаг вхождения в блок (парсинг блоков)
2. При соответствии, фильтр сообщает об успешности

## Если задан ключ -t 
1. Проверяем тип записи
2. При соответствии, фильтр сообщает об успешности

## Если задан ключ -k 
1. Проверяем идентдификатор настройки
2. При соответствии, фильтр сообщает об успешности

## Если задан ключ -l 
1. Проверяем тип записи на соответсвие типа блока
2. Получаем имя блока
3. Вывод имени

## Если задан ключ -f 
1. Считывание данных из файла "Формат вывода" (каталог Out)
2. Подстановка данных в указанный формат
3. Вывод данных

## Функции и их взаимодействия
### Список используемых функций

* api.sh
  + init\_pattern:
    * Инициализация шаблона парсинга (каталог parse)
    * Запись шаблона в память
    * Принимает путь до файла шаблона
	
  + get\_name:
    * Извлечение имени блока по шаблону парсинга
    * Возвращает имя блока
    * Принимает регулярное выражение по которому определяется блок и строку содержащую начало блока
  
  + block\_name:
    * Извлечение имени из типа
    * Возвращает имя блока
    * Принимает тип записи

  + check\_str:
    * Определяет тип строки конфигурации
    * Возвращает тип строки
    * Принемает строку из файла конфигурации

  + recursive\_read:
    * Рекурсивное чтение конфигурационных файлов
    * Построчно возвращает обработчику тип и содержимое строки
    * Принемает путь до файла конфигурации и набор обработчиков

  + handlers:
    * Последовательный вызов обработчиков
    * Обеспечивает универсальную построчную обработку
    * Принимает набор функций, который необходимо исполнить
	
* filter.sh
  + filter\_nest:
    * Фильтр вложений
	* Возвращает статус фильтрации
	* Принимает уровни вложений или их диапозоны

  + filter\_type:
    * Фильтр по типу записи
	* Возвращает статус фильтрации
	* Принимает набор типов

  + filter\_name:
    * Фильтр по имени блока
	* Возвращает статус фильтраций
	* Принимает имена блоков

  + filter\_name\_key:
    * Фильтр по ключам настроек
	* Возвращает статус фильтрации
	* Принимает имена ключей

* out.sh
  + init\_format:
    * Инициализация формата вывода
	* Запись формата в память
	* Принимает путь до файла формата

  + list\_block:
    * Получение имен всех блоков
	* Вывод всех имен блоков, которые содержатся в конфигурации
    * Не принимает параметров

  + render:
    * Форматирование строк конфигураций
	* Отформатированый вывод данных
	* Принимает формат вывода

  + direct\_render:
     * Прямой вывод данных
     * Не принимает параметров

  + number\_str:
    * Вывод номеров строк и путь до файла источника
    * Не принимает параметров

  + format\_write:
    * Вывод формата записи
	* Отформатированый вывод данных
	* Принимает тип записи


  + log\_out:
    * Диагностический вывод
	* Не принимает параметров
	
## Взаимодействие функций

С помощью init\_pattern программа получает информацию о конфигурационных фалйлах их способу парсинга, затем, с помошью функций recursive\_read, читает конфигурацию построчно которая, в свою очередь, с помошью функций check\_str (внутри которой используется
для формирование типов функция get\_name), определяет тип строк и отправляет строки и их типы в функцию handel. Handel поочередно передает данные в функции, которые содержатся в наборе его параметров. Остальные функции вызываются с помошью ключей.

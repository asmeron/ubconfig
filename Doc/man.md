# UBPARSE
## Общие действия

1. Считывание данных из файла \glqqШаблон парсинга\grqq (каталог parse)
2. Находим файл конфигураций
3. Читаем построчно файл
4. Опредиляем тип строки
5. Определяем есть ли конец файла, если да то завершаем, иначе читаем файл дальше

## Если задан ключ -r 
1. Сравниваем уровень вложение строки с заданым
2. При соответствие, фильтр сообшает об успешности

## Если задан ключ -n 
1. Проверяем флаг вложености в блок
2. При соответствие, фильтр сообшает об успешности

## Если задан ключ -t 
1. Проверяем тип записи
2. При соответствие, фильтр сообшает об успешности

## Если задан ключ -k 
1. Проверяем идентдификатор настроики
2. При соответствие, фильтр сообшает об успешности

## Если задан ключ -l 
1. Проверяем тип записи на соответсвие типа блок
2. Получаем имя блока
3. Вывод имени

## Если задан ключ -f 
1. Считывание данных из файла \glqqФормат вывода\grqq (каталог Out)
2. Подстанока данных в указый формат
3. Вывод данных

## Функций и их взаимодействия
### Список используемых функций

* api.sh
  + init\_pattern:
    * Инициализация шаблона парсинга (каталог parse)
    * Запись шаблона в память
    * Принемает путь до файла шаблона
	
  + get\_name:
    * Извлечение имени блока по шаблону парсинга
    * Возвращает имя блока
    * Принемает регулярное выражение по которому определяется блок и строку
				содержашие начало блока
  + block\_name:
    * Извлечение имени из типа
    * Возвращает имя блока
    * Принемает тип записи

  + check\_str:
    * Определяет тип строки конфигураций
    * Возвращает тип строки
    * Принемает строку из файла конфигураций

  + recursive\_read:
    * Рекурсивное чтение конф.файлов
    * Построчно возвращает обработчику тип и содержимое строки
    * Принемает путь до файла конфигураций и набор обработчиков

  + handlers:
    * Последовательный вызов обработчиков
    * Обеспечивает универсальную построчную обработку
    * Принемает набор функций который необходимо исполнить
	
* filter.sh
  + filter\_nest:
    * Фильтр вложений
	* Возвращает статус фильтраций
	* Принемает уровни вложений или их диапозоны

  + filter\_type:
    * Фильтр по типу записи
	* Возвращает статус фильтраций
	* Принемает набор типов

  + filter\_name:
    * Фильтр по имени блока
	* Возвращает статус фильтраций
	* Принемает имена блоков

  + filter\_name\_key:
    * Фильтр по ключам настроек
	* Возвращает статус фильтраций
	* Принемает имена ключей

* out.sh
  + init\_format:
    * Инициализация формата вывода
	* Запись формата в память
	* Принемает путь до файла формата

  + list\_block:
    * Получение имен всех блоков
	* Вывод всех имен блоков которые содержатся в конфигураций
    * Не принемает параметров

  + render:
    * Форматирование строк конфигураций
	* Отформатированый вывод данных
	* Принемает формат вывода

  + direct\_render:
     * Прямой вывод данных
     * Не принемает параметров


  + number\_str:
    * Вывод номера строк и путь до файла источника
    * Не принемает параметров

  + format\_write:
    * Вывод формата записи
	* Отформатированый вывод данных
	* Принемает тип записи


  + log\_out:
    * Диагностический вывод
	* Не принемает параметров
	
## Взаимодействие функций

С помошью init\_pattern программа получает информацию о конф.фалйлах их способу 
парсинга, затем с помошью функций recursive\_read читает конфигурацию построчно 
которая в свою очередь с помошью функций check\_str (внутри которой используется
для формирование типов функция get\_name) определяет тип строк и отправляет
строки и их типы в функцию handel. Handel поочередно передает данные в функций 
который содержатся в наборе его параметров.
Остальные функций вызываются с помошью ключей.